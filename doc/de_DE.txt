:product: yaffas

= {product} documentation

== Installation


=== Systemvorausetzungen

  * Ubuntu oder Red Hat Enterprise Linux
  * ca. 22 MB zusätzlicher Festplattenplatz


=== Vorgehen

Yaffas kann direkt aus den unten angegebenen Repositories installiert werden.


==== Ubuntu 10.04.2 LTS

**Hinzufügen der benötigten Repositories**

  echo "deb http://repo.yaffas.org/ubuntu ./" >> /etc/apt/sources.list
  echo "deb http://archive.canonical.com/ubuntu lucid partner" >> /etc/apt/sources.list

**Importieren des Paketkeys**

  wget -O - http://repo.yaffas.org/ubuntu/repo.key | apt-key add -

**Installation der Pakete**

  apt-get update
  apt-get install yaffas yaffas-zarafa

Dies installiert die {product} Basismodule und Zarafa.

**Optional: Installation der Konfiguration**

Diese Paket und seine Abhängigkeiten dienen dazu, ein frisch installiertes System mit {product} administrierbar zu machen. Ohne yaffas-config müssen eine Reihe von manuellen Anpassungen an Konfigurationsdateien vorgenommen werden, damit die Administrationsoberfläche vollständig funktionieren kann.

  apt-get install yaffas-config

Auf die Fragen des Installationssystems, ob Konfigurationsdateien ersetzt werden sollen, sollte mit "ja" geantwortet werden.

[WARNING]
==============

Bei Installation des **yaffas-config** Paketes und seiner Abhängigkeiten werden folgende Einstellungen und Daten gelöscht oder überschrieben:

  * bestehender LDAP-Baum
  * slapd Konfiguration
  * Samba Konfiguration
  * smbldap-tools Konfiguration
  * postfix Konfiguration
  * zarafa Konfiguration (wenn yaffas-zarafa installiert wurde)
  * MySQL Konfiguration (Optimierungen für Zarafa werden eingetragen)


==============


==== Red Hat Enterprise Linux 5

Die Installation unter Red Hat Enterprise Linux verläuft ähnlich der Installation unter Ubuntu.

[WARNING]
==============

Das Paket yaffas-config überschreibt hier ebenfalls die oben genannten Konfigurationen.

==============

**Hinzufügen der benötigten Repositories**

Vor der Installation von {product} müssen die Pakete für Zarafa von http://www.zarafa.com/download-release heruntergeladen und installiert werden.

Um alle Abhängigkeiten automatisch auflösen zu können, sollten die http://fedoraproject.org/wiki/EPEL[EPEL] und http://rpmrepo.org/RPMforge[RPMforge] Repositories eingebunden werden.

Im Verzeichnis /etc/yum.repos.d die Datei yaffas.repo mit folgendem Inhalt anlegen:
----
[yaffas]
name = Yaffas $releasever
baseurl = http://repo.yaffas.org/rhel/
enabled = 1
protect = 0
gpgcheck = 0
----

**Importieren des Paketkeys**

  rpm --import http://repo.yaffas.org/rhel.key

**Installation der Pakete**

  yum install yaffas yaffas-zarafa yaffas-config


=== Erste Schritte

Nach der Installation ist das {product} Webinterface unter folgender URL zu erreichen: `https://<ip-des-servers>:10000`

Der Benutzername ist "admin" und das Passwort "yaffas".

Im folgenden Setup-Dialog muss das Admin-Passwort geändert werden. Außerdem muss der Benutzer einen MySQL Benutzer angeben, der die Berechtigung hat auf einem MySQL-Server eine Datenbank für Zarafa anzulegen.

Nach dem ersten Login sollte zunächst der Authentifizerungsserver ausgewählt werden. Zur Auswahl stehen hier Active Directory, lokale Authentifizerung am lokalen LDAP und die Anbindung an einen externen LDAP. Bitte beachten Sie, dass für diesen Schritt momentan noch die Konfigurationsdateien (yaffas-config) installiert sein müssen.

Unter Red Hat Enterprise Linux müssen zudem die benötigten Dienste gestartet und zum automatischen Start beim Booten eingestellt werden. Dies ist unter dem Menüpunkt "System->Dienste" möglich. Da unter RHEL standardmäßig eine iptables-Firewall aktiv ist, müssen die Ports für die benötigten Dienste nachträglich manuell geöffnet werden.

[IMPORTANT]
==============

Damit die Namen der Ordner in Zarafa in der richtigen Sprache angelegt werden, muss die gewünschte Sprache in der {product} UI eingestellt sein. Dies sollte vor dem Anlegen von Benutzern durchgeführt werden.

==============

== System

=== Dienste

==== Dienste starten und beenden

Über den Menüpunkt  _"Dienste"_ kann der Status der einzelnen Systemdienste abgerufen werden. Soll ein Dienst gestartet, gestoppt oder ein Neustart durchgeführt werden, so kann sich die gewünschte Aktion per Rechtsklick auf den entsprechenden Dienst auswählen lassen. Zusätzlich kann noch enigestellt werden, ob der Dienst bereits beim Booten gestartet werden soll und ob der Dienst überwacht werden soll. Bei  _"Überwachung"_ des Dienstes erhält der Admin eine Benachrichtigung per E-Mail falls der Dienst ausfällt.



==== Systemzeit
Unter diesem Reiter lässt sich die Systemzeit manuell ändern. Dazu wird die gewünschte Zeit über Drop-Down-Feldern eingestellt und anschließend übernommen. Soll die Systemuhr auf die Hardware-Zeit (BIOS) gestellt werden, so kann dies über "Synchronisiere Systemzeit mit Hardware-Zeit" vorgenommen werden.



==== Zeitserver
Zusätzlich kann die Zeit mit einem Zeitserver synchronisiert werden. Dies ist einmalig oder in stündlichen bzw. täglichen Intervallen möglich. Dazu wird die IP-Adresse oder der Hostname des Zeitservers in das entsprechende Feld eingetragen und der gewünschte Intervall gesetzt.

Beispielsweise können die im folgenden aufgelisteten Zeitserver verwendet werden. Voraussetzung dafür ist, dass ein gültiger DNS-Server konfiguriert wurde.

  * time.fu-berlin.de
  * ntp0.fau.de
  * ntp1.ptb.de



==== Neustart / Herunterfahren
Der Server lässt sich über den Reiter  _"System herunterfahren"_ wahlweise neustarten oder ausschalten. 



=== Zertifikat / Schlüssel Verwaltung 

Um die Kommunikation mit dem Webinterface und den Mailverkehr zu verschlüsseln werden Zertifikate und Schlüssel benötigt. Diese garantieren die Authentizität, Vertraulichkeit und Integrität der Daten gegenüber Dritten. Kostenlos signierte SSL-Zertifikate sind unter der Adresse <http://www.cacert.org> erhältlich.

Über den Menüpunkt "Zertifikat / Schlüssel Verwaltung" lassen sich diese verwalten. Hier können Sie selbst Zertifikate erstellen und diese mit Ihrem eigenen Schlüssel signieren. Sie können auch bereits erstellte Zertifikate importieren oder Zertifikate vom System löschen.


==== Zertifikate verwalten
Über den Reiter  _"Verwalte installierte Zertifikate"_ werden alle auf dem System vorhandenen Zertifikate angezeigt. Wenn Sie ein Zertifikat löschen mochten, so setzen Sie den Haken vor dem Zertifikat und klicken Sie auf den Button  _Löschen_  Das Defaultzertifikat default.crt, welches für alle Dienste des Systems verwendet wird, kann nicht gelöscht werden.

[TIP]
==============
Wenn Sie  _"default.crt"_ austauschen möchten, so müssen Sie entweder ein neues Zertifikat für alle Dienste erstellen, oder ein vorhandenes Zertifikat importieren.
==============


==== Eigene Zertifikate erstellen
Um selbst ein Zertifikat zu erstellen, klicken Sie auf den Reiter  _"Generiere Selbst Signierte Zertifikate und Schlüssel"_  füllen alle Felder aus und erstellen das Zertifikat mit einem Klick auf "Generiere Schlüssel". Sollten Sie bei Service  _"all"_ ausgewählt haben, dann haben Sie das Default-zertifikat erstellt. Dieses wird immer dann verwendet, wenn keine anderen Zertifikate speziell für einen Service vorhanden sind. Alle anderen Werte für  _Service_ erstellen ein Zertifikat für den entsprechenden Dienst.


==== Zertifikate importieren
Möchten Sie ein vorhandenes Zertifikat hochladen, so klicken Sie auf den Reiter  _"Zertifikat hochladen"_ und auf Durchsuchen um die Datei auf Ihrer Festplatte auszuwählen.
Wählen Sie die Datei mit dem Zertifikat aus und klicken Sie auf Öffnen. Nun schließt sich der Dialog und Sie müssen noch den Service auswählen, für den Ihr Zertifikat gelten soll. Nach dem Import sollten Sie eventuell die noch vorhandenen doppelten Zertifikate für andere Dienste löschen.

[IMPORTANT]
==============

Um ein Zertifikat erfolgreich zu importieren, müssen sich der Key und das Zertifikat zusammen in einer Datei befinden. Dabei ist zu beachten, dass der Key an **erster** Stelle steht und die Datei **nicht** verschlüsselt ist.
==============


== Netzwerk



=== Konfiguration

==== Grundeinstellungen
Unter dem Menüpunkt  _Netzwerk->Konfiguration_ werden unter dem  _Grundeinstellungen_ Reitern die grundlegenden Netzwerkeinstellungen festgelegt. 

[NOTE]
==============
Im Feld "Rechnername" geben Sie den Namen ein, unter dem der Rechner im Netzwerk erreichbar sein soll. Dieser Rechnername dient gleichzeitig auch als Name im Windows-Netzwerk.
Der Domainname muss im Format wie in http://www.ietf.org/rfc/rfc1034.txt[RFC 1034] vorgeschrieben eingeben werden (z.B. „bitbone.de“).
Die Windowsarbeitsgruppe wird für die Windows Netzwerkumgebung benötigt.
==============



==== Proxykonfiguration
Die Einstellungen für den HTTP-Proxy werden benötigt, falls in Ihrem Firmennetzwerk kein direkter Internetzugang besteht, um die aktuellen {product}-Updates herunterzuladen. 

Tragen Sie dazu in das oberste Feld die IP-Adresse und in das zweite Feld den Port Ihres HTTP-Proxy-Servers ein. Verlangt Ihr Proxy eine Benutzerauthentifizierung, so tragen Sie die erforderlichen Daten bei "Benutzer" und "Passwort" ein. Bestätigen Sie den Vorgang mit Speichern



==== Schnittstellen-Konfiguration
In den  _Schnittstellen_ Reitern werden die grundlegenden Einstellungen für jede verfügbare Schnittstelle festgelegt. Jede Schnittstelle besitzt einen eigenen Reiter über den sie sich konfigurieren lässt.

Sind in Ihrem Netzwerk mehrere Netzwerkbereiche vorhanden und befinden sich Mailserver oder einzelne Arbeitsstationen in einem anderen Netz, so muss das Standardgateway angegeben werden. Im Feld  _DNS Server IP-Adresse_ wird dann die Adresse des DNS-Servers eingetragen. Weiterhin können Sie mehrere Suchdomänen eintragen. Diese werden beim Auflösen von Rechnernamen verwendet, falls kein vollständiger Name angegeben wird.

Die Einstellungen pro Schnittstelle sind nur aktiv wenn die Schnittstelle aktivert wird. Sind mehrere Schnittstellen gleichzeitig aktiviert, so werden auch die Einstellungen aller Schnittstellen verwendet. 

Über den Button  _Neue virtuelle IP Adresse_ können Sie auf der zugehörigen Schnittstelle eine weitere IP Adresse konfigurieren. Für diese virtuelle Schnittstelle können Sie dann die gleichen Werte wie für eine normale Schnittstelle vergeben.



=== SNMP
Um den Zugriff via SNMP-Protokoll zu aktivieren, setzen Sie den Haken im entsprechenden Feld unter dem Menüpunkt  _Netzwerk->SNMP_ 

In dem Feld  _"Community"_ können Sie das Passwort für den SNMP-Zugriff festlegen.

[IMPORTANT]
==============
Bei SNMP werden Daten generell unverschlüsselt über das Netzwerk übertragen. Wählen Sie daher zu ihrer eigenen Sicherheit ein anderes als das root- oder Administratorpasswort aus!
==============

Das Feld  _"Zugriff für"_ definiert wer Zugriff zum SNMP-Agenten bekommt. Der Eintrag "default" bedeutet, dass lediglich vom lokalen Rechner aus Zugriffe erlaubt sind.

Sie können hier eine einzelne IP-Adresse oder ein Subnetz nach dem http://tools.ietf.org/html/rfc4632[CIDR]-Muster _Adresse/Maske_ (z.B. 192.168.0.1/24) eintragen.




== Benutzerkonten

===  Authentifizierungsserver

Über den Menüpunkt  _Benutzerverwaltung->Authentifizierungsserver_ lässt sich die Art der Authentifizierung über die Benutzernamen und Passwörter bezogen werden, festlegen.

Nach der Installation von {product} muss dies als erstes konfiguriert werden da einige Dienste davon abhängig sind. Benutzer und Gruppen können erst angelegt werden nachdem eine Authentifizierungsmethode ausgewählt wurde.



{product} kann die Benutzer gegen die lokale Datenbank, einen entfernten {product} Authentifizierungsserver oder eine Microsoft Windows ActiveDirectory Domäne authentifizieren.

Bei Verwendung der lokalen Benutzerdatenbank kann der lokale Server auch als Authentifizierungsserver für andere {product}-Produkte dienen.

[WARNING]
==============
Wird die Art der Authentifizierung umgestellt, so werden alle Einstellungen zurückgesetzt, die Benutzer und Gruppen betreffen (z.B. MSN-Zuordnungen, gewählter Dateityp, Gruppe). Diese Einstellungen müssen nach einer Umstellung erneut festgelegt werden.

Bei der Umstellung der Authentifizierung versucht {product} vorhandene Benutzer im neuen Authentifizierungs-Modus zu finden und zu übernehmen. Benutzerdaten die nicht zugeordnet werden können, werden gelöscht.
==============



Um eine Art der Authentifizierung festzulegen, wählen Sie im Menüpunkt  _Benutzerkonten->Authentifizierungsserver_ den Reiter  _Authentifizierung wählen_ 


====  Lokale Authentifizierung
Hier können Sie einstellen, dass die Benutzerdatenbank lokal gepflegt wird. Zusätzlich können Sie hier noch die Funktion als Authentifizierungsserver aktivieren. Dadurch wird es anderen {product} Installationen ermöglicht, diesen Server zur Authentifizierung zu verwenden. 



==== {product} LDAP Server
Falls Sie bereits ein {product}-Produkt mit aktivem LDAP Dienst einsetzen, können Sie hier die LDAP Konfiguration des entfernten Servers eintragen. Die dort gepflegten Benutzer können so auch auf diesem System verwendet werden. 

[NOTE]
==============
Ein {product}, das sich gegen einen entfernten Server authentifiziert, kann nicht selbst als Authentifizierungsserver fungieren. Sollte diese Funktion aktiv sein, wird sie an dieser Stelle automatisch deaktiviert.
==============

Folgende Parameter müssen für den Betrieb mit einem LDAP-Server konfiguriert werden:
[options="header"]
|======
| Parameter | Funktion 
| Server/IP | Rechnername bzw. IP-Adresse des entfernten {product} Authentifizierungs-Servers. Dabei ist zu beachten, dass vom entfernten Server Authentifizierungsanfragen akzeptiert werden. 
| Base DN | Die Base DN definiert, ab welcher Stelle im Verzeichnisbaum abwärts die Suche nach bestimmten Objekten gestartet werden soll. 
| Bind DN | Die Bind DN und das Bind Passwort dient der Authentifizierung gegen den LDAP-Server. 
| Bind Passwort | Das Passwort zur LDAP-Authentifizierung. Sollte es Probleme bei der Authentifizierung geben, dann verwenden Sie bitte auf dem LDAP-Server ein CRYPT-verschlüsseltes Passwort. 
|======


====  Remote-LDAP-Authentifizierung
Sie können {product} gegen einen entfernten LDAP-Server authentifizieren lassen. Dort müssen lediglich die Schema-Datei hinterlegt werden und die benötigten Daten eingetragen werden. 

[options="header"]
|======
| Parameter | Funktion 
| Server/IP | Tragen Sie hier bitte die IP des LDAP-Servers ein. 
| Base DN | Tragen Sie hier die im LDAP-Server konfigurierten Werte ein. 
| Bind DN | Tragen Sie hier die im LDAP-Server konfigurierten Werte ein. 
| Base DN Benutzer | Tragen Sie hier die im LDAP-Server konfigurierten Werte ein. 
| Base DN Gruppe | Tragen Sie hier die im LDAP-Server konfigurierten Werte ein. 
| Bind Passwort | Tragen Sie hier die im LDAP-Server konfigurierten Werte ein. 
| Suchattribut Benutzer und Gruppe | Geben Sie hier bitte an, unter welchem Attribut die Benutzer- bzw. Gruppeninformationen gesucht werden sollen. 
|======




////

====  PDC Authentifizierung
Mit Hilfe dieses Authentifizierungsmechanismus, können Sie {product} einer bestehenden Windows Domäne beitreten lassen. Anschließend stehen alle Benutzer und Gruppen der Domäne - mit ihren Passwörtern - auf dem {product} zu Verfügung. 

[NOTE]
==============
Beim Aktivieren von PDC- oder AD-Authentifizierung wird automatisch die verwendete Arbeitsgruppe auf den Kurznamen der Domäne gesetzt. Dies ist für die Funktionalität notwendig. Der Arbeitsgruppenname ist daher auch für Änderungen gesperrt.

Am Windows Server selbst müssen keinerlei Änderungen durchgeführt werden. Es wird lediglich ein Computerkonto für den {product} Server erzeugt.

Stellen Sie sicher, dass die Systemuhr des {product}-Servers nicht mehr als 5 Minuten von der Zeit des PDC abweicht; andernfalls kann es zu Problemen bei der Benutzerauthentifizierung kommen.
==============

[options="header"]
|======
| Parameter | Funktion 
| Primary Domain Controller | Rechnername bzw. IP-Adresse des Windows ActiveDirectory Servers. 
| Domäne | Fully Qualified Name der Domäne (z.B. bitbone.local) 
| Domänenadministrator | Loginname eines Benutzers mit Domänenadministrator Rechten. 
| Bind Passwort | Passwort des Benutzers. 
|======

////



==== Active Directory Authentifizierung
Durch diese Art der Authentifizierung können Sie das {product} einer bestehenden ActiveDirectory-Domäne beitreten lassen. Anschließend stehen alle Benutzer und Gruppen der Domäne - mit ihren Passwörtern - auf dem {product} zu Verfügung. 

[NOTE]
==============
Bei der Verwendung der AD-Authentifizierung raten wir dazu, den Domänencontroller gleichzeitig als ersten DNS-Server einzutragen.
==============

[options="header"]
|======
| Feld | Funktion 
| Domänencontroller | Rechnername bzw. IP-Adresse des Windows ActiveDirectory Servers. 
| Domain | Tragen Sie hier bitte den Namen der AD-Domäne ein. 
| Domänenadministrator | Für den einmaligen Beitritt zur Domäne wird der Domänenadministrator benötigt. Der Benutzer wird in der cn=Users Organistationseinheit gesucht.
|======


Für die regulären Anfragen an den Domänencontroller genügt ein Benutzeraccount. Geben Sie dazu bitte die passenden Benutzerdaten an. Sie können, müssen aber nicht, hier wiederum den Administrator verwenden. 

[WARNING]
==============
Falls Sie den Active Directory User, sein Passwort oder die DN Ihres Servers ändern, so müssen Sie diese Änderungen auch im Authentifizierungsmodul vornehmen!
==============



=== Benutzerverwaltung
Unter dem Menüpunkt  _Benutzerkonten->Benutzerverwaltung_ werden alle existierenden Benutzer angezeigt. Bei einer großen Anzahl von Benutzern können die Sortier- und Filterfunktion sehr hilfreich sein. Um einen vorhandenen Benutzer zu editieren oder zu löschen, klicken Sie mit der rechten Maustaste auf den entsprechenden Benutzer.



==== Neuen Benutzer hinzufügen
Um einen neuen Benutzer anzulegen, wählen Sie den Reiter  _"Benutzer hinzufügen"_ aus. Hierfür benötigen Sie Username, Vorname, Nachname und die zweimalige Eingabe eines Passwortes. Optional können eine oder mehrere Gruppenmitgliedschaften gesetzt werden. Die Auswahl mehrerer Gruppen und das Entfernen einer Gruppenzugehörigkeit ist dabei mit gedrückter STRG-Taste möglich. 

[NOTE]
==============
Sonderfall {product} & ZARAFA:

Bitte beachten Sie, dass das Feld  _"E-Mail Adresse"_ zum Versand benötigt wird, aber nicht für den Empfang verwendet wird. Sollte sich der lokale Teil der E-Mail-Adresse vom Benutzernamen unterscheiden, so tragen Sie die Mailadresse bitte unbedingt bei den  _Aliasen_ ein, da sonst kein Mailempfang möglich ist!
==============

Über den Punkt E-Mail Alias lassen sich weitere E-Mail Aliase für den Benutzer anlegen.

[NOTE]
==============
Eine Mailbox und deren Unterordner werden erst nach dem ersten Empfang einer Email oder nach dem ersten Login angelegt. Das heisst die Einstellungen für Standard-Quota und Standard-Ordner können dann anders sein, als zu dem Zeitpunkt an dem der User angelegt wurde.

Wenn Sie möchten, dass die Mailbox eines Users angelegt wird, dann können Sie diesem User eine Mail senden oder sich unter dessen Namen anmelden. Bei mehreren Usern empfiehlt sich die Verwendung der Rundmail-Funktion.
==============



=== Gruppenverwaltung
Über den Menüpunkt Gruppenverwaltung gelangen Sie zur Übersicht der aktuell im System angelegten Gruppen.

Neue Gruppen können über den Reiter  _"Gruppe erstellen"_ angelegt werden. Nach dem Eintrag der neuen Gruppe im Feld Gruppenname wird diese über den Button Erstellen im System angelegt.

[TIP]
==============
Wenn Sie mehrere Gruppen auf einmal anlegen wollen, so geben Sie diese durch Komma getrennt an.
==============

Vorhandene Gruppen können per Rechtsklick editiert/gelöscht werden.




=== Admin Passwort
Über diesen Dialog kann das Passwort für die Web-Oberfläche geändert werden. Hierzu ist eine zweimalige Eingabe des Passwortes mit anschließendem Klick auf Sichern erforderlich. 

[TIP]
==============
Passwörter sollten keine benutzerbezogenen Daten, keine bekannten Wörter und keine  _"einfachen"_ Tastaturkombinationen beinhalten (z.B. nebeneinander liegende Tasten).
==============




== Wartung

=== Konfiguration sichern

==== Konfiguration sichern
Mit diesem Formular kann eine gespeicherte Konfiguration eingespielt oder die aktuelle Konfiguration gesichert werden. Über den Button  _"Sichern"_ wird die aktuelle Konfiguration auf einen Datenträger gesichert.

[NOTE]
==============
Denken sie daran, regelmäßig die Konfiguration zu sichern!
==============



==== Konfiguration einspielen
Hier können Sie eine Konfigurationsdatei auswählen. Mit dem Button  _"Einspielen"_ wird die Konfigurationsdatei auf das {product} geladen. Dieser Prozess kann einige Minuten in Anspruch nehmen.

[WARNING]
==============
Beim Einspielen einer vorhandenen Konfiguration ist folgendes zu beachten:

  * Die Portaldaten für Updates,
  * die Netzwerk-Konfiguration,
  * das admin und root-Passwort,
  * die Einstellungen zum Authentifzierungsserver

werden nicht zurückgesichert
==============



===  Logdateien Betrachter
Über den Logdateien Betrachter ist es möglich die Logdateien einzelner Dienste für eine spätere Auswertung herunterzuladen. Wählen Sie hierzu die entsprechende Datei aus der Liste mit einem Rechtsklick aus und klicken Sie anschließend auf den Dialog  _"Herunterladen"_  Nach dem erfolgreichen Herunterladen und Speichern der Logdatei kann diese dann mit jedem beliebigen Texteditor (z.B. Wordpad) eingesehen werden.

Beispiele für Logdateien sind:
[options="header"]
|======
| Datei | Funktion 
| /var/log/maillog | Logfile des Postfix-Mailservers. Hierin sind Daten über ein- und ausgehende Mails enthalten. 
| /var/log/messages | Hier werden weniger wichtige Meldungen des Kernels gespeichert. 
| /var/log/mail.info | Hier werden Meldungen des Typs "warn" des Mailservers gespeichert. Diese Meldungen gefährden nicht den laufenden Betrieb. 
| /var/log/samba/log.nmbd | Informationen des Samba-Servers und dessen NetBIOS-Namensdiensten. 
| /var/log/samba/log.smbd | Informationen im laufenden Betrieb des Samba-Dienstes.
| /var/log/zarafa
|======


=== Meldungen
An die hier angegebene E-Mail-Adresse werden die Fehlermeldungen des Systems gesendet (zu geringer Plattenplatz, Lizenzablauf). Für diesen Zweck kann eine lokale oder eine externe E-Mail-Adresse verwendet werden. Dieses Postfach sollte in regelmäßigen Abständen auf Meldungen des Servers überprüft werden. Mit Speichern  wird die Adresse im System gespeichert.

[WARNING]
==============

Bitte tragen Sie an dieser Stelle eine gültige E-Mailadresse ein. Kritische Meldungen können so an den Administrator gemeldet werden um die Funktionsfähigkeit von {product} zu gewährleisten.
==============

[TIP]
==============
Wenn Sie mehrere Empfänger informieren wollen, dann tragen Sie als Adresse ein Alias ein, z.B. "admins@localhost". In der Mailalias-Verwaltung tragen Sie dann  _"admins"_ als Alias ein und setzen dort die Mailadressen der Empfänger ein.
==============



=== Support
Über den Menüpunkt  _Support_ erhalten Sie eine Binärdatei, die man bei Problemen verwenden kann, um eine schnelle Fehlersuche zu bewerkstelligen.

{product} ist ein freies Community-Projekt, weshalb standardmäßig kein Support enthalten ist. Support kann von jedem angeboten werden, der sich mit {product} auskennt.

Die bitbone AG bietet mit den bitkit|SOLUTIONS weiterhin die kommerzielle und supportete Variante an.




== Mailserver



=== Fetchmail

Fetchmail wird benutzt um E-Mails von externen Postfächern abzuholen. Über den Reiter  _"Abholauftrag hinzufügen"_ können Sie einen neuen Eintrag für fetchmail vornehmen.

Der  _"Mailserver-Name"_ ist die Bezeichnung, unter der die Einstellungen gespeichert werden. Wenn dieser gleichzeitig dem tatsächlichen Namen des Mailservers entspricht, können Sie in der Zeile darunter die entsprechende Option aktivieren. Falls nicht, so muss der tatsächliche Name eingetragen werden. Über die Option  _"Abholung aktiviert"_ stellen Sie ein, ob von diesem Mailserver E-Mails geholt werden sollen oder nicht. Über das Protokoll-Feld wird der Typ des Protokolls angegeben. Sollte ihr Maildienst nicht auf dem Standardport für das jeweilige Protokoll laufen, so könnnen Sie im Feld  _"Port"_ eine andere Portnummer angeben.

In den Benutzerdetails können Sie Einstellungen vornehmen, die den Benutzer betreffen unter dessen Kennung die Mails abgeholt werden.  _"Benutzername"_ und  _"Passwort"_ sind die Daten, welche dem Mailserver übermittelt werden. Als  _"Lokales Ziel"_ können Sie festlegen, wohin die abgeholten Mails weitergeleitet werden sollen. Hier können Sie entweder eine lokale Mailbox, einen angelegten Mailalias oder " _Multidrop_  wählen. 

Im  _Multidrop_ Modus wird jeweils der  _"localpart"_ (links vom @-Zeichen) der Empfängeradresse ausgewertet und nach einem lokalen Benutzer oder Alias gleichen Namens gesucht, an den die Mail dann zugestellt wird. Alle weiteren Felder sind optional und können den eigenen Bedürfnissen angepasst werden. 



=== Mailserver Konfiguration


==== Grundkonfiguration
Über den Reiter  _"Grundkonfiguration"_ können Sie die Konfiguration Ihres Mailservers anpassen. Der  _"Mailserver Name"_ ist der Name, der bei ausgehenden E-Mails an den entfernten SMTP-Server gesendet wird. Diese Einstellung ist optional.

Mit der maximalen Mailgröße kann die Größe ein- und ausgehender Mails begrenzt werden. Die Eingabe erfolgt in MB. Ohne diese Option können Mails unbegrenzter Größe gesendet werden. 




==== Lokale Domänen
Über  _"Lokale Domänen"_ können die Domains festgelegt werden für die sich der Mail-Server zuständig fühlen soll. E-Mails an diese Domains werden dann angenommen und lokal zugestellt.




==== Smarthost
Unter dem Reiter  _"Smarthost"_ tragen Sie die IP-Adresse des Mailservers Ihrer Firma oder des Providers ein. Dieser Server ist dann für die Auslieferung von externen E-Mails zuständig. Sollte dieser Mailserver eine Authentifizierung verlangen, so tragen Sie die erforderlichen Daten bei  _"Benutzername"_ und  _"Passwort"_ ein. Der Benutzername muss mindestens zwei Zeichen lang sein!




==== Open Relay Subnetze
Für alle unter dem Reiter  _"Open-Relay Subnetze"_ aufgeführten Adressen ist ein externer Mailversand ohne Anmeldung möglich. Hier sollten also alle Netze (IP-Subnetze) und Rechner (einzelne IP-Adressen) eingetragen werden, denen der externe Mailversand ohne Authentifizierung erlaubt werden soll. 

Immer möglich ist dagegen der Mailversand an Domains für die der Mailserver zuständig ist. Ein Beispiel für das Freischalten eines Subnetzes wäre der Eintrag _"192.168.0.0/24"_, wobei _"/24"_ die Anzahl der gesetzten Bits in der Netzmaske angibt. Die Netzmaske würde also in diesem Fall _"255.255.255.0"_ lauten. 



=== Mail-Warteschlange

In der Mail-Warteschlange befinden sich alle E-Mails, die nicht versendet werden konnten.
Über einen Rechtsklick kann man die ausgewählte E-Mail löschen, versuchen sie auszuliefern, sie an den Postmaster oder einen beliebigen User weiterleiten oder anzeigen. 



=== Mailalias Konfiguration
Durch das Mailalias-Modul werden alle gesetzten Mailaliase - sowohl die Aliase des Systems, als auch eigene Aliase - angezeigt. 

[TIP]
==============
Beim Hinzufügen eines Mailaliases ist zu beachten, dass die Aliasprüfung **vor** der Mailboxzuweisung abgearbeitet wird. Somit kann es passieren, dass E-Mails einem anderen Benutzer zugewiesen werden obwohl der betreffende Benutzer eine Mailbox auf dem Server hat. Prüfen Sie also in einem solchen Fall alle gesetztenMailaliase.
==============

Über den Reiter  _"Alias hinzufügen"_ können neue Aliase definiert werden. Durch Komma getrennt können einem Alias auch mehrere Benutzer als Ziel zugewiesen werden. Als Ziel kann ein Benutzer der {product} Installation oder eine E-Mail-Adresse angegeben werden.

Wollen Sie einen Alias entfernen, klicken Sie in der Übersicht mit der rechten Maustaste auf den entsprechenden Eintrag und wählen Sie den Eintrag  _"Löschen"_ 



=== Sicherheit

[IMPORTANT]
==============

Die Dienste spamassassin und clamav müssen über das Dienste Modul separat gestartet werden, bevor diese vom Sicherheitsmodul genutzt werden können. Ein reines Aktivieren im Sicherheitsmodul genügt nicht. Haben Sie diese Dienste nach dem Aktivieren im Sicherheitsmodul gestartet, so muss der Dienst amavis ebenfalls neu gestartet werden.

==============

[TIP]
==============

Falls der clamav Dienst sich nicht starten lässt, so hat dieser möglicherweise noch keine Virensignaturen. Diese bezieht der freshclam Dienst automatisch, benötigt dafür aber eine Internetverbindung. Sollte bei Ihnen hierfür ein Proxy Server nötig sein, so tragen Sie diesen entsprechend unter Netzwerkkonfiguration ein. Dadurch wird eine erneute Aktualisierung der Signaturen mittels freshclam ausgelöst.

==============



=== Rundmail
Sie können über das  _Rundmail_ Modul eine E-Mail an alle Benutzer schicken. Tragen Sie hierzu bitte Ihre Absender E-Mail Adresse, den Betreff und die Nachricht ein. Nach einem Klick auf Verschicken wird die E-Mail versendet.

[NOTE]
==============
Beachten Sie, dass es ein paar Minuten dauern kann, bis alle E-Mails in die Mailboxen verteilt worden sind.
==============




== Lizenz



=== Zarafa Lizenzschlüssel
In dem Lizenzmodul für Zarafa können Sie neue Basisschlüssel und Zusatzschlüssel für weitere Clients einspielen. Geben Sie dazu in das vorgesehene Feld die jeweilige Seriennummer ein und betätigen Sie die Eingabe durch den Button  _"Schlüssel einspielen"_ 

Alle installierten Schlüssel können Sie unter dem Reiter  _"Installierte Lizenzen"_ einsehen. Weitere Informationen erhalten Sie unter dem Reiter  _"Lizenzlog"_ 




== Zarafa



=== Konfiguration
In diesem Modul können Sie den Speicher für Zarafa optimieren, die Größe von Dateianhängen festlegen und den Inhalt von Quota E-Mails definieren. 

Klicken Sie hier auf  _"Optimiere"_ um die Speichereinstellungen auf Ihrem System optimieren zu lassen. Dies ist nur nötig wenn sich die Größe Ihres Arbeitsspeichers geändert hat. Der Arbeitsspeicher wird dementsprechend für Zarafa optimiert. 

Auch können Sie hier die Maximalgröße für Dateianhänge festlegen, die über die Zarafa Webaccess Oberfläche hochgeladen werden dürfen. 

[TIP]
==============
Diese Beschränkung überschreibt **nicht** die des Mailservers. Ist dort eine geringere Größe erlaubt, so hat diese Vorrang.
==============

Unter dem  _"Meldungen"_ Reiter können Sie die Texte der Quota E-Mails anpassen. Die Variablenbeschreibung erhalten Sie über die Online Hilfe. 

Sie können folgende Variablen zum erstellen des Textes verwenden:

[options="header"]
|======
| Variable | Bedeutung 
| $\{ZARAFA_QUOTA_NAME} | der Name des Zarafakontos 
| $\{ZARAFA_QUOTA_STORE_SIZE} | die aktuelle Größe des Kontos 
| $\{ZARAFA_QUOTA_WARN_SIZE} | das Limit für eine Warnung 
| $\{ZARAFA_QUOTA_SOFT_SIZE} | das Limit für eine Sendesperre des Kontos 
| $\{ZARAFA_QUOTA_HARD_SIZE} | das Limit für eine Sende- und Empfangssperre des Kontos 
|======


=== Ressourcen
In diesem Modul können Sie neue Ressourcen anlegen oder löschen. Markieren Sie hierzu eine Ressource mit der rechten Maustaste und wählen Sie die gewünschte Aktion. 

Beachten Sie beim Anlegen: Eine Ressource benötigt einen Namen - unter diesem erscheint sie im globalen Adressbuch - und eine eine Beschreibung.
Sie können außerdem festlegen, ob eine Ressource nur einmal pro Zeitraum gebucht werden darf ( _"Konflikte verbieten"_  und ob Wiederholungstermine abgelehnt werden sollen. 

[IMPORTANT]
==============
Beim Bearbeiten einer Ressource können Sie die Eigenschaften einer Ressource ändern, nicht aber deren Namen.
==============



=== Zarafa Einrichten

Die Konfiguration von {product} & ZARAFA erfolgt über die bekannte Oberfläche. Es sind einige Besonderheiten zu beachten, die wir Ihnen an dieser Stelle kurz erklären werden.

Prinzipiell ist jeder im {product} angelegte Benutzer auch ein Zarafa-Benutzer. Bitte achten Sie darauf, dass Sie eine entsprechende Lizenz sowohl für {product} als auch für Zarafa besitzen. Sollten Sie weniger Zarafa-Userlizenzen haben als {product}-User, so werden nur die User mit den niedrigsten UIDs Zugriff auf Zarafa haben. 



===  Zuordnung der E-Mailadressen
Beachten Sie bitte, dass beim Anlegen eines neuen Benutzers die, im Feld  _"E-Mail Adresse"_ eingetragene Adresse dem Format  _"benutzername@konfigurierte_maildomain"_ entsprechen muss, damit der Mailempfang möglich ist. Soll als Empfangsmailadresse eine andere verwendet werden, so tragen Sie diese bitte gleich im Feld  _"E-Mail Alias"_ mit ein.

Die unter  _"E-Mail Adresse"_ eingetragene Adresse wird auch als Absenderadresse für alle Mails, die via WebAccess versandt werden, verwendet. Damit eine einwandfreie Zurdnung gewährleistet ist, konfigurieren Sie bitte zuerst die lokale(n) Domain(s) auf dem Mailserver (Menu Mailserver -> Konfiguration -> Lokale Domains). 



=== Zarafa Webaccess
Zugriff via WebAccess erhalten Sie über die Eingabe der URL in die Adressleiste des Browsers mit einem angehängten  _"webaccess"_  z.B. https://zarafaserver.lokal/webaccess - Weitere Alternativen sehen Sie, wenn Sie das {product} über den Namen bzw. die IP-Adresse ansprechen, ohne Angabe eines Ports. (z.B. http://zarafaserver.local)

Eine komplette Anleitung und aktuelle Dokumentationen für den Zarafa WebAccess können Sie unter http://www.zarafaserver.de/doc herunterladen.



=== Anbindung von Microsoft Outlook

Der zur Anbindung von Microsoft Outlook benötige Client liegt in der Freigabe  _"Software"_ im Verzeichnis  _"zarafa"_ auf Ihrem {product}. Bitte verwenden Sie ausschließlich diese Version, da sie auf die in {product} integrierte Version von Zarafa abgestimmt ist. Bei einem Update sollten Sie auch immer die aktuelle Version aus diesen Verzeichnis installieren.

Installieren Sie nun zunächst den Client auf dem Windows-Rechner durch einen Doppelklick auf  _"zarafaclient.exe"_  Beachten Sie bitte, dass Sie zur Installation Administratorrechte benötigen.

Starten Sie Outlook und wählen Sie aus dem Menü  _"Extras"_ den punkt  _"E-Mail-Konten"_  Erstellen Sie ein neues E-Mail-Konto. 

image:media/de/zarafa/guides_zarafa_connect1.png[]



Als Servertyp wählen Sie bitte  _"Zusätzliche Servertypen"_ aus, und klicken auf weiter. 

image:media/de/zarafa/guides_zarafa_connect2.png[]



Wenn Sie wie oben beschrieben die zarafaclient.exe von der CD installiert haben, können Sie hier  _"Zarafa-Server"_ auswählen. Sollte das nicht der Fall sein, dann installieren Sie zunächst bitte den Zarafaclient. 

image:media/de/zarafa/guides_zarafa_connect3.png[]



Tragen Sie nun die Daten ihres {product} & ZARAFA-Servers ein. Sie können wahlweise Port 237 für verschlüsselte Übertragung (Standard) oder Port 236 für eine unverschlüsselte Verbindung benutzen. Den Benutzernamen und das Passwort verwenden Sie wie im {product} konfiguriert. 

image:media/de/zarafa/guides_zarafa_connect4.png[]


Stellen Sie bitte sicher, dass für das erstellte Konto der Punkt  _"Neue Nachrichten übermitteln an"_ auf  _"Inbox - Benutzer"_ gesetzt ist. Schließen Sie nun Outlook und öffnen Sie es erneut - Sie sollten nun Zugriff auf ihren Store haben und können mailen, Termine verwalten, Kontakte pflegen, etc. 

[NOTE]
==============
Bitte haben Sie Verständnis, dass wir keinen Support für die Benutzung, Konfiguration oder Installation von Microsoft Outlook leisten können!
==============



=== Backup Pfade
An dieser Stelle möchten wir Ihnen eine unspezifische Vorgehensweise aufzeigen wie die Daten des Servers gesichert werden können. Bei der Rücksicherung der Daten sollte beachtet werden, dass sich der {product}-Server auf dem gleichen Versionsstand befindet.

Die zu sichernden Pfade für {product} & ZARAFA lauten:
[options="header"]
|======
| Pfad | Eintrag 
| /var/log/ | Log-Dateien 
| /data/mail/ | Mailboxen und Sieve Filterskripte 
| /var/lib/fetchmail/.fetchmail-UIDL-cache | falls fetchmail mit POP3 verwendet wird 
| Datenbank MySQL (mysqldump) | Gesamte Daten des Zarafa Servers 
| /data/zarafa/ | E-Mail Anhänge 
|======

**Vorgehensweise zur Sicherung der Daten:**

  - Sicherung der Konfiguration über System -> Konfiguration sichern
  - init 1 -> Wechseln in den Single-User Modus
  - Sicherung der einzelnen Pfade in ein temporäres Verzeichnis
  - init 2 -> Normaler Betriebsmodus
  - Sicherung der Daten auf einen externen Datenträger


**Vorgehensweise zur Rücksicherung der Daten:**

  - Rücksicherung der Konfiguration über System -> Konfiguration sichern
  - Zurückkopieren der Daten in ein temporäres Verzeichnis
  - init 1 -> Wechseln in den Single-User Modus
  - Löschen aller Dateien unterhalb der genannten Pfade
  - Rücksicherung der einzelnen Pfade aus dem temporäres Verzeichnis
  - init 2 -> Normaler Betriebsmodus

